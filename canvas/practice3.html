<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>

    <style>
        canvas {

            border: 1px solid red;
        }
    </style>

    <script>
        window.onload = function () {

            var line=new LineChart(document.querySelector("canvas").getContext("2d"));
            line.init([[100,200],[150,220],[200,300],[250,350],[300,80]])

        }


        function LineChart(ctx) {
            this.ctx = ctx || document.querySelector("canvas").getContext("2d");
            this.space = 20;
            this.arrowSize = 10;
            this.canvasWidth = this.ctx.canvas.width;
            this.canvasHeight = this.ctx.canvas.height;
            this.gridSize = 20;
            this.x0 = this.space;
            this.y0 = this.ctx.canvas.height - this.space;
            this.dotSize=6;



        }

        LineChart.prototype.init = function (data) {
            this.drawGrid();
            this.drawGoords();
            this.drawDots(data);

        }

        LineChart.prototype.drawGrid = function () {
            var  column = Math.floor(this.canvasWidth / this.gridSize);
            var  row=Math.floor(this.canvasHeight/this.gridSize);
            for (let index = 0; index < column; index++) {
                this.ctx.beginPath();
                this.ctx.moveTo(this.gridSize*index-0.5,0);
                this.ctx.lineTo(this.gridSize*index-0.5,this.canvasHeight);
                this.ctx.strokeStyle="#eee"
                this.ctx.stroke();
            }

            for (let index = 0; index < row; index++) {
                this.ctx.beginPath();
                this.ctx.moveTo(0,index*this.gridSize-0.5);
                this.ctx.lineTo(this.canvasWidth,index*this.gridSize-0.5);
                this.ctx.strokeStyle="#eee"
                this.ctx.stroke();
            }
        }

        LineChart.prototype.drawGoords=function(){

            this.ctx.beginPath();
            this.ctx.strokeStyle="black";
            this.ctx.moveTo(this.x0,this.y0);
            this.ctx.lineTo(this.canvasWidth,this.y0);
            this.ctx.lineTo(this.canvasWidth-this.arrowSize,this.y0+this.arrowSize/2);
            this.ctx.lineTo(this.canvasWidth-this.arrowSize,this.y0-this.arrowSize/2);
            this.ctx.lineTo(this.canvasWidth,this.y0);

            this.ctx.moveTo(this.x0,this.y0);
            this.ctx.lineTo(this.x0,this.space);
            this.ctx.lineTo(this.x0+this.arrowSize/2,this.space+this.arrowSize);
            this.ctx.lineTo(this.x0-this.arrowSize/2,this.space+this.arrowSize);
            this.ctx.lineTo(this.x0,this.space);

            this.ctx.stroke();
            this.ctx.fill();
        }

        
        LineChart.prototype.drawDots=function(data){
            var oldX0=0;
            var oldY0=0;
            data.forEach((element,i )=> {
                this.ctx.moveTo(element[0]+this.x0-this.dotSize/2,this.y0-element[1]-this.dotSize/2);
                this.ctx.lineTo(element[0]+this.x0+this.dotSize/2,this.y0-element[1]-this.dotSize/2);
                this.ctx.lineTo(element[0]+this.x0+this.dotSize/2,this.y0-element[1]+this.dotSize/2);
                this.ctx.lineTo(element[0]+this.x0-this.dotSize/2,this.y0-element[1]+this.dotSize/2);
                this.ctx.closePath();
              
                this.ctx.fill();
               
                if (i==0) {
                    this.ctx.beginPath();
                    this.ctx.moveTo(this.x0,this.y0);
                    this.ctx.lineTo(element[0]+this.x0,this.y0-element[1]);
                    this.ctx.stroke();
                }else{
                    this.ctx.beginPath();
                    this.ctx.moveTo(oldX0,oldY0);
                    this.ctx.lineTo(element[0]+this.x0,this.y0-element[1]);
                    this.ctx.stroke();
                }
                oldX0=element[0]+this.x0;oldY0=this.y0-element[1];
            });

        }
    </script>
</head>

<body>
    <canvas  width="600"  height="400">

    </canvas>
</body>

</html>